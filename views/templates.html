<script type="text/template" id="crossTmpl">
<% for (var ci in crosses ) { 
var verticals = crosses[ci]["verticals"]; %>
<div class="col-md-<%= size %>">
  <div class="panel panel-<%= _class %>">
    <div class="panel-heading">
      <a class="mybtn-link" href="crossEdit/<%= ci %>"><%= crosses[ci]["title"] %></a>
    </div>
    <div class="panel-body">    
      <% for ( var cj in verticals ) { %>
        <a class="mybtn-link" href="#/vertical/<%= cj %>"><%= verticals[cj].title %></a>
      <% } %>
    </div>
  </div>
</div>
<% } %>
</script>

<script type="text/template" id="verticalTmpl">
  <div class="panel panel-<%= _class %>">
    <div class="panel-heading">
      <% if (query) { print(header); %>&nbsp;&nbsp;<a class="mybtn-link" href="<%=href%>">Edit found</a>
      <% } else { %><a class="mybtn-link" href="<%=href%>"><%=header%></a><% } %>
      <button type="button" class="close" aria-hidden="true" onclick="history.back();return false;" title="Back">&times;</button>
    </div>
    <table class="cross"><tbody>
      <% for ( var ci in plints) { 
      var pairs = plints[ci].pairs; 
      var start = parseInt(plints[ci].start); %>
        <tr>
          <% if (query) { %>
            <td class="colv0">
              <a class="mybtn-link" title="Cross <%=plints[ci].root[1]%>"><%=plints[ci].root[1]%></a>            
            </td>
            <td class="colv1">
              <a class="mybtn-link" href="#/vertical/<%=plints[ci].parent[0]%>"title="Vertical <%=plints[ci].parent[1]%>"><%=plints[ci].parent[1]%></a>            
            </td>        
          <% } %>
          <td class="colv1">
          <% var _title = "Plint: "+plints[ci].title+"\n"+plints[ci].modon+"\n"+users[plints[ci].modby]+"\nCommon data: "+plints[ci].comdata; %>
            <a class="mybtn-link" href="plintEdit/<%=ci%>" title="<%= _title %>"><%= plints[ci].title %></a>
          </td>
          <% for ( var cj in pairs ) { 
            var t = pairs[cj][0]; 
            var finded = '';
            if (t) { _title = t+"\n"+pairs[cj][1]+"\n"+users[pairs[cj][2]];
                     if (t.indexOf(query) >= 0) finded = 'class="finded"'; }
              else _title = ""; %>
            <td <%=finded%>>
            <a class="mybtn-link" title="<%= _title %>" href="#/pairEdit/<%=ci%>/<%=parseInt(cj)+1%>">
              <sup><%=  parseInt(cj) + start %>&nbsp;&nbsp;</sup><%= t %>
            </a>
            </td>
          <% }; %>
          <td class="commondata" style="border-left: 2px solid #ccc;"><%= plints[ci].comdata %></td>
        </tr>
      <% }; %>
    </tbody></table>
  </div>
</script>

<script type="text/template" id="chainTmpl">
<div class="col-md-<%=size%>">
  <div class="panel panel-<%=_class%>">
    <div class="panel-heading">
      <%=data.header%>
      <button type="button" class="close" aria-hidden="true" onclick="history.back();return false;" title="Back">&times;</button>
    </div>
    <div class="panel-body">
      <p><i><%=data.modinfo%></i></p>
      <form class="form-horizontal chain" action="javascript:pairEditAccept()">
        <div class="form-group">
          <label class="col-md-2 control-label"><%=T._TITLE_%></%=></label>
          <div class="col-md-8"><input name="title" class="form-control" value="<%=data.title%>"></div>
        </div>
        <button type="button" class="btn-sm btn-success pull-right" title="Add link to chain" onclick="addLink()">+</button>
        <table id="chaintable">
          <tr><% for ( var ci in tbheaders ) { print("<td>"+tbheaders[ci]+"</td>") } %> </tr>
        </table>
        <div>
        <button class="btn pull-right btn-<%=_class%>" onclick="history.back();return false;">Cancel</button>
        <input type="submit" class="btn pull-right btn-<%=_class%>">
        </div>
       
      </form>
    </div>
  </div>
</div>
 
<div class="col-md-5">
  <div class="panel panel-default">
    <div class="panel-heading">Watch
        <button type="button" class="close" aria-hidden="true" onclick="history.back();return false;" title="Back">&times;</button>
    </div>
    <div class="panel-body">
    <!--<textarea rows="6" cols="64"></textarea>-->
    <br>
    <br>

    </div>
    <input class="btn btn-warning" type="button" value="Refresh" onclick="refreshWatch()">
      <table class="table table-bordered" id="chaintablewatch">
          <tr class="info"><td>Link</td><td>Cross</td><td>Vertical</td><td>Plint</td><td>Pair</td></tr>
      </table>
  </div>
</div>
</script>

<script type="text/template" id="liveSearchTmpl">
<% for (var ci in search ) { %>
  <a><%=search[ci]%></a>
<% } %>
</script>

<script type="text/template" id="foundEditTmpl">
<div class="col-md-5">
  <div class="panel panel-primary">
    <div class="panel-heading">Edit found
        <button type="button" class="close" aria-hidden="true" onclick="history.back();return false;" title="Back">&times;</button>
    </div>
    <div class="panel-body">
    
      <form class="form-horizontal chain" action="javascript:foundEditAccept()">
        <button type="button" class="btn-sm btn-success pull-right" title="Regex help" onclick="addLink()"><span class="glyphicon glyphicon-question-sign"></span></button>
        <div class="form-group">
          <label class="col-md-2 control-label"><%=T._FIND_%></%=></label>
          <div class="col-md-8"><input name="title" class="form-control" value="<%=query%>"></div>
        </div>
        <div class="form-group">
          <label class="col-md-2 control-label"><%=T._REPLACE_%></%=></label>
          <div class="col-md-8"><input name="title" class="form-control" value="<%=query%>"></div>
        </div>
        <table class="table table-bordered" id="foundtable">
          <tr class="info"><% for ( var ci in tbheaders ) { print("<td>"+tbheaders[ci]+"</td>") } %> </tr>
        </table>
        <div>
        <button class="btn pull-right btn-primary" onclick="history.back();return false;">Cancel</button>
        <input type="submit" class="btn pull-right btn-primary">
        </div>       
      </form>
      
    </div>
  </div>
</div>
</script>
